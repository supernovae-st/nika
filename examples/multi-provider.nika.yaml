# Multi-provider workflow - Claude + OpenAI
#
# DAG: topic → [claude_view, openai_view] → synthesis
#
schema: "nika/workflow@0.1"

provider: openai
model: gpt-4o-mini

tasks:
  - id: topic
    exec:
      command: "echo 'The future of AI assistants'"

  - id: claude_view
    use:
      subject: topic
    infer:
      prompt: |
        Give a brief (2-3 sentences) perspective on: {{use.subject}}
      model: haiku

  - id: openai_view
    use:
      subject: topic
    infer:
      prompt: |
        Give a brief (2-3 sentences) perspective on: {{use.subject}}
      provider: openai
      model: gpt-4o-mini

  - id: synthesis
    use:
      claude: claude_view
      gpt: openai_view
    infer:
      prompt: |
        Compare these two AI perspectives:

        CLAUDE: {{use.claude}}

        GPT: {{use.gpt}}

        What's similar? What's different? (2-3 sentences)

flows:
  - source: topic
    target: [claude_view, openai_view]

  - source: [claude_view, openai_view]
    target: synthesis
