# Real NovaNet MCP Integration Test
#
# This workflow tests REAL MCP communication with NovaNet.
# Requires: Neo4j running, NovaNet MCP binary at specified path.
#
# Usage:
#   cargo run -- run examples/novanet-real-test.nika.yaml

schema: "nika/workflow@0.2"
provider: mock

mcp:
  novanet:
    command: /Users/thibaut/supernovae-st/supernovae-agi/novanet-dev/tools/novanet-mcp/target/release/novanet-mcp
    args: []
    env:
      NOVANET_MCP_NEO4J_URI: bolt://localhost:7687
      NOVANET_MCP_NEO4J_USER: neo4j
      NOVANET_MCP_NEO4J_PASSWORD: novanetpassword
      RUST_LOG: info

tasks:
  # Query NovaNet for entity count
  - id: count_entities
    invoke:
      mcp: novanet
      tool: novanet_query
      params:
        cypher: "MATCH (e:Entity) RETURN count(e) AS count"

  # Show the result
  - id: show_count
    use:
      count: count_entities
    exec:
      command: "echo 'Entity count from NovaNet: {{use.count}}'"

flows:
  - source: count_entities
    target: show_count
